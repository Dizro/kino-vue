import{b as p,c as a,d as r,o,a as i,e as u,S as j,t as c,_ as F,f as d,h as v,w as h,z as B,n as P,g as w,F as b,p as _,A as M,u as C,j as z,k as I,q as f,x as $,i as A,y as L}from"./index-DyXVGfsC.js";import{_ as R}from"./LoadingSpinner-DpRhnHc2.js";const T={key:0,class:"inline-flex items-center gap-1.5 self-start rounded-lg bg-black/70 px-2.5 py-1.5 shadow-lg border border-white/10"},V={class:"relative h-4 w-4 star-icon-container"},q={class:"font-poppins text-sm font-semibold text-white drop-shadow-sm"},Y={__name:"RatingDisplay",props:{rating:{type:Number,required:!0}},setup(s){const l=s,n=p(function(){return l.rating&&typeof l.rating=="number"&&l.rating>0?l.rating.toFixed(1):null});return(t,e)=>n.value?(o(),a("div",T,[i("div",V,[u(j,{class:"h-full w-full"})]),i("div",q,c(n.value),1)])):r("",!0)}},S={class:"flex-grow text-slate-100 md:ml-8"},E={class:"mb-4 flex items-start justify-between"},O={class:"text-3xl font-bold font-poppins text-slate-50 md:text-4xl"},H={key:0,class:"text-2xl font-normal text-slate-400"},U={key:1,class:"mb-6"},G={class:"flex flex-wrap gap-2"},J={key:2,class:"mb-6"},K={class:"text-base leading-relaxed text-slate-300 font-montserrat"},Q={class:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-4 text-sm"},W={key:0},X={key:1},Z={key:2},ee={key:3,class:"mt-8"},te={class:"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5"},se=["src","alt"],oe={class:"mt-2 text-xs font-medium text-slate-200 sm:text-sm"},ae={key:2,class:"text-xxs text-slate-400 sm:text-xs"},ie={__name:"MovieInfoBlock",props:{movie:{type:Object,required:!0},isFavorite:{type:Boolean,required:!0}},emits:["toggleFavorite"],setup(s){function l(n){if(!n||n==="N/A")return"Неизвестно";const t=new Date(n);if(isNaN(t.getFullYear())||t.getFullYear()<1900)return n;const e=t.getDate(),g=t.toLocaleString("ru-RU",{month:"long"}),y=t.getFullYear();return e+" "+g+" "+y}return(n,t)=>(o(),a("div",S,[i("div",E,[i("h1",O,[v(c(s.movie.title)+" ",1),s.movie.year?(o(),a("span",H," ("+c(s.movie.year)+")",1)):r("",!0)]),u(w,{variant:"text",size:"sm",onClick:t[0]||(t[0]=e=>n.$emit("toggleFavorite")),class:P([s.isFavorite?"text-violet-500 hover:text-violet-300":"text-blue-500 hover:text-violet-400","p-1"])},{default:h(()=>[u(B,{"is-filled":s.isFavorite,class:"h-7 w-7 sm:h-8 sm:w-8"},null,8,["is-filled"])]),_:1},8,["class"])]),s.movie.voteAverage>0?(o(),d(Y,{key:0,rating:s.movie.voteAverage,class:"mb-4 text-lg"},null,8,["rating"])):r("",!0),s.movie.genres&&s.movie.genres.length?(o(),a("div",U,[t[1]||(t[1]=i("h3",{class:"mb-2 text-lg font-semibold text-slate-300"},"Жанры:",-1)),i("div",G,[(o(!0),a(b,null,_(s.movie.genres,(e,g)=>(o(),a("span",{key:g,class:"rounded-full bg-slate-700 px-3 py-1 text-xs font-medium text-slate-300"},c(e),1))),128))])])):r("",!0),s.movie.overview?(o(),a("div",J,[t[2]||(t[2]=i("h3",{class:"mb-2 text-xl font-semibold text-slate-300 font-poppins"},"Описание:",-1)),i("p",K,c(s.movie.overview),1)])):r("",!0),i("div",Q,[s.movie.runtime?(o(),a("div",W,[t[3]||(t[3]=i("strong",{class:"text-slate-400"},"Длительность:",-1)),v(" "+c(s.movie.runtime)+" мин. ",1)])):r("",!0),s.movie.releaseDate&&s.movie.releaseDate!=="N/A"?(o(),a("div",X,[t[4]||(t[4]=i("strong",{class:"text-slate-400"},"Дата выхода:",-1)),v(" "+c(l(s.movie.releaseDate)),1)])):r("",!0),s.movie.countries&&s.movie.countries.length?(o(),a("div",Z,[t[5]||(t[5]=i("strong",{class:"text-slate-400"},"Страны:",-1)),v(" "+c(s.movie.countries.join(", ")),1)])):r("",!0)]),s.movie.cast&&s.movie.cast.length?(o(),a("div",ee,[t[6]||(t[6]=i("h3",{class:"mb-4 text-xl font-semibold text-slate-300 font-poppins"},"В ролях:",-1)),i("div",te,[(o(!0),a(b,null,_(s.movie.cast.slice(0,10),e=>(o(),a("div",{key:e.id,class:"flex flex-col items-center text-center"},[e.profilePath?(o(),a("img",{key:1,src:e.profilePath,alt:e.name,class:"h-24 w-24 rounded-full object-cover shadow-md sm:h-28 sm:w-28",loading:"lazy"},null,8,se)):(o(),d(M,{key:0,text:"Нет фото",class:"h-24 w-24 rounded-full sm:h-28 sm:w-28 bg-slate-700"})),i("p",oe,c(e.name),1),e.character?(o(),a("p",ae,c(e.character),1)):r("",!0)]))),128))])])):r("",!0)]))}},le=F(ie,[["__scopeId","data-v-9f023285"]]),ne={},re={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ce(s,l){return o(),a("svg",re,l[0]||(l[0]=[i("path",{d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const me=F(ne,[["render",ce]]),ue={key:2,class:"space-y-8 md:space-y-12",itemscope:"",itemtype:"http://schema.org/Movie"},de={key:0,class:"relative -mx-4 h-[300px] overflow-hidden rounded-b-2xl shadow-lg sm:-mx-6 md:-mx-10 lg:-mx-desktop-x md:h-[400px] lg:h-[480px]"},ve=["src","alt"],ge={key:1,class:"h-16"},xe={class:"main-container -mt-[150px] md:-mt-[200px] lg:-mt-[240px] relative z-10 flex flex-col gap-6 md:flex-row md:gap-8 lg:gap-10"},fe={class:"mx-auto w-2/3 flex-shrink-0 sm:w-1/2 md:mx-0 md:w-[280px] lg:w-[320px]"},he=["src","alt"],we={__name:"MovieDetailView",setup(s){const l=A(),n=L(),t=C(),e=p(function(){return t.currentMovie}),g=p(function(){return e.value?t.isFavorite(e.value.id):!1});function y(){e.value&&t.toggleFavorite(e.value)}async function k(){const x=Number(l.params.id);if(isNaN(x)){n.push({name:"Не найдено"});return}if(await t.loadMovieDetail(x),e.value){let m="";e.value.year&&(m=" ("+e.value.year+")"),document.title=e.value.title+m+" - КиноВью"}else t.isLoading||(document.title="Фильм не найден - КиноВью")}z(k),I(function(){return l.params.id},function(x){x&&l.name==="Детали фильма"&&(k(),window.scrollTo({top:0,behavior:"smooth"}))});function D(){n.back()}function N(){n.push("/")}return(x,m)=>(o(),a("div",null,[u(w,{onClick:D,variant:"outline-blue",size:"sm",class:"mb-6"},{default:h(()=>[u(me,{class:"w-5 h-5 mr-2"}),m[0]||(m[0]=v(" Назад "))]),_:1,__:[0]}),f(t).isLoading&&!e.value?(o(),d(R,{key:0})):f(t).hasError&&!e.value?(o(),d($,{key:1,type:"error",title:"Ошибка загрузки",message:f(t).error},null,8,["message"])):e.value?(o(),a("article",ue,[e.value.backdropPath?(o(),a("div",de,[i("img",{src:e.value.backdropPath,alt:e.value.title+" фон",class:"h-full w-full object-cover object-center",loading:"eager"},null,8,ve),m[1]||(m[1]=i("div",{class:"absolute inset-0 bg-gradient-to-t from-gray-900/80 via-gray-900/40 to-transparent"},null,-1))])):(o(),a("div",ge)),i("div",xe,[i("div",fe,[e.value.posterPath?(o(),a("img",{key:1,src:e.value.posterPath,alt:e.value.title+" постер",class:"w-full rounded-xl object-cover shadow-2xl aspect-[2/3]",loading:"lazy",itemprop:"image"},null,8,he)):(o(),d(M,{key:0,text:"Нет постера",class:"aspect-[2/3] bg-slate-700"}))]),u(le,{movie:e.value,"is-favorite":g.value,onToggleFavorite:y},null,8,["movie","is-favorite"])])])):f(t).isLoading?r("",!0):(o(),d($,{key:3,type:"empty",title:"Фильм не найден",message:"К сожалению, информация о данном фильме отсутствует."},{actions:h(()=>[u(w,{onClick:N,variant:"primary"},{default:h(()=>m[2]||(m[2]=[v("На главную")])),_:1,__:[2]})]),_:1}))]))}};export{we as default};
